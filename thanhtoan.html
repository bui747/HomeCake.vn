<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Thanh to√°n</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <style>
    body { font-family: Arial; margin: 20px; }
    .container { display: flex; justify-content: space-between; }
    .left, .right { width: 48%; }
    input, textarea, select { width: 100%; margin: 5px 0; padding: 8px; }
    .product-summary { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
    .total { font-weight: bold; }
    h2 {
      text-align: center;
      color: #b03060;
      margin-top: 20px;
      margin-bottom: 20px;
    }
    .radio-option {
      display: inline-flex;
      align-items: center;
      margin-bottom: 12px;
      margin-top: 12px;
      gap: 10px;
    }
    .radio-option label {
      margin: 0;
      white-space: nowrap;
    }
    .right .summary-line {
      margin-bottom: 15px;
    }
  </style>
</head>
<body>
<!-- Thanh tr√™n c√πng v·ªõi th√¥ng tin -->
<div class="top-bar">
  <div>
    <span>üìû 0123456789</span>
    <span>üìß HomeCake@gmail.com</span>
  </div>
  <div id="login-section">
    <button onclick="location.href='DangNhap.html'">üë§ ƒêƒÉng nh·∫≠p</button>
  </div>
</div>

<!-- Thanh ƒëi·ªÅu h∆∞·ªõng -->
<nav class="main-nav">
  <div class="nav-left">
    <img src="images/logo.png" alt="HomeCake Logo" class="logo-img">
  </div>
  <div class="nav-links">
    <a href="index.html">Trang ch·ªß</a>
    <a href="about.html">Gi·ªõi thi·ªáu</a>
    <div class="dropdown">
      <span class="nav-item">Danh m·ª•c s·∫£n ph·∫©m ‚ñæ</span>
      <div class="dropdown-content">
        <a href="minibirthday.html">B√°nh sinh nh·∫≠t mini</a>
        <a href="tiramisu.html">B√°nh Tiramisu</a>
        <a href="bonglantrungmuoi.html">B√°nh b√¥ng lan tr·ª©ng mu·ªëi</a>
        <a href="trangmieng.html">B√°nh tr√°ng mi·ªáng</a>
      </div>
    </div>
    <a href="news.html">Tin t·ª©c</a>
    <a href="contact.html">Li√™n h·ªá</a>
  </div>
  <div class="nav-right">
    <button id="cart-icon" onclick="location.href='giohang.html'">
      üõí Gi·ªè h√†ng <span id="cart-count">(0)</span>
    </button>
  </div>
</nav>

<h2>Th√¥ng tin ƒë·∫∑t h√†ng</h2>
<div class="container">
  <div class="left">
    <label>H·ªç v√† t√™n ƒë·ªám *</label>
    <input type="text" id="ho">

    <label>T√™n *</label>
    <input type="text" id="ten">

    <label>Email</label>
    <input type="email" id="email">

    <label>ƒê·ªãa ch·ªâ *</label>
    <input type="text" id="diachi">

    <label>Ch·ªçn Qu·∫≠n/Huy·ªán *</label>
    <select id="quanhuyen" onchange="capNhatPhiVanChuyen()">
      <option value="">-- Ch·ªçn qu·∫≠n n·ªôi th√†nh H√† N·ªôi --</option>
      <option value="21.0285,105.8542">Ho√†n Ki·∫øm</option>
      <option value="21.0278,105.8342">Ba ƒê√¨nh</option>
<option value="21.0307,105.8007">ƒê·ªëng ƒêa</option>
      <option value="21.0358,105.8522">Hai B√† Tr∆∞ng</option>
      <option value="21.0381,105.7828">C·∫ßu Gi·∫•y</option>
      <option value="21.0523,105.8000">Thanh Xu√¢n</option>
      <option value="21.0745,105.7853">B·∫Øc T·ª´ Li√™m</option>
      <option value="21.0383,105.7481">Nam T·ª´ Li√™m</option>
      <option value="21.1175,105.8142">Long Bi√™n</option>
    </select>

    <label>S·ªë ƒëi·ªán tho·∫°i *</label>
    <input type="tel" id="sdt">

    <label>Ghi ch√∫</label>
    <textarea id="ghichu"></textarea>

    <h3>Ph∆∞∆°ng th·ª©c thanh to√°n</h3>
    <div class="radio-option">
      <input type="radio" name="pttt" checked>
      <label>Chuy·ªÉn kho·∫£n ng√¢n h√†ng</label>
    </div>
    <div class="radio-option">
      <input type="radio" name="pttt">
      <label>Thanh to√°n khi nh·∫≠n h√†ng</label>
    </div>
  </div>

  <div class="right">
    <h3 class="summary-line">T·ªïng gi√° tr·ªã</h3>
    <div id="product-list" class="summary-line"></div>
    <div class="product-summary"><strong>Ph√≠ v·∫≠n chuy·ªÉn:</strong> <span id="ship-cost">0</span>ƒë</div>
    <div class="total summary-line">T·ªïng: <span id="total-amount">0</span>ƒë</div>
    <button onclick="xacNhan()" class="summary-line">X√°c nh·∫≠n</button>
  </div>
</div>

<script>
  const QUAN_BANH_LAT = 21.0074; // 12 Ch√πa B·ªôc, ƒê·ªëng ƒêa, H√† N·ªôi
  const QUAN_BANH_LON = 105.8297;
  let vanChuyen = 0;

  function haversine(lat1, lon1, lat2, lon2) {
    const R = 6371;
    const toRad = x => x * Math.PI / 180;
    const dLat = toRad(lat2 - lat1);
    const dLon = toRad(lon2 - lon1);
    const a = Math.sin(dLat/2) ** 2 + Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon/2) ** 2;
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    return R * c;
  }

  function capNhatPhiVanChuyen() {
    const selected = document.getElementById("quanhuyen").value;
    if (!selected) return;

    const [lat, lon] = selected.split(',').map(Number);
    const distance = haversine(QUAN_BANH_LAT, QUAN_BANH_LON, lat, lon);

    if (distance <= 1.5) vanChuyen = 0;
    else if (distance <= 3) vanChuyen = 15000;
    else if (distance <= 6) vanChuyen = 20000;
    else if (distance <= 10) vanChuyen = 25000;
    else vanChuyen = 35000;

    loadOrderSummary();
  }

  function loadOrderSummary() {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    let listDiv = document.getElementById("product-list");
    listDiv.innerHTML = "";
    let total = 0;

    cart.forEach(item => {
      let itemTotal = item.price * item.quantity;
      total += itemTotal;

      let div = document.createElement("div");
      div.className = "product-summary";
      div.innerHTML = `
        <strong>${item.name}</strong><br>
        S·ªë l∆∞·ª£ng: ${item.quantity}<br>
        Gi√°: ${item.price.toLocaleString()}ƒë
      `;
      listDiv.appendChild(div);
    });

    total += vanChuyen;
document.getElementById("ship-cost").innerText = vanChuyen.toLocaleString();
    document.getElementById("total-amount").innerText = total.toLocaleString();
  }

  function xacNhan() {
    const ho = document.getElementById("ho").value.trim();
    const ten = document.getElementById("ten").value.trim();
    const diachi = document.getElementById("diachi").value.trim();
    const sdt = document.getElementById("sdt").value.trim();

    if (!ho || !ten || !diachi || !sdt) {
      alert("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß c√°c tr∆∞·ªùng b·∫Øt bu·ªôc.");
      return;
    }

    alert("ƒê∆°n h√†ng c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c x√°c nh·∫≠n!");
  }

  window.onload = loadOrderSummary;
</script>

<!-- Footer -->
<footer>
  <div class="footer-grid">
    <div class="footer-column">
      <h4>V·ªÅ HomeCake</h4>
      <ul>
        <li><a href="about.html">Gi·ªõi thi·ªáu</a></li>
        <li><a href="contact.html">Li√™n h·ªá</a></li>
        <li><a href="footer/hethongcuahang.html">H·ªá th·ªëng c·ª≠a h√†ng</a></li>
      </ul>
    </div>
    <div class="footer-column">
      <h4>H·ªó tr·ª£</h4>
      <ul>
        <li><a href="footer/chinhsachvanchuyen.html">Ch√≠nh s√°ch v·∫≠n chuy·ªÉn</a></li>
        <li><a href="footer/chinhsachbaohanh.html">Ch√≠nh s√°ch b·∫£o h√†nh</a></li>
        <li><a href="footer/chinhsachdoitra.html">Ch√≠nh s√°ch ƒë·ªïi - tr·∫£ - ho√†n ti·ªÅn</a></li>
      </ul>
    </div>
    <div class="footer-column">
      <h4>D·ªãch v·ª•</h4>
      <ul>
        <li><a href="footer/dieukhoan.html">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a></li>
        <li><a href="footer/csbaomattt.html">Ch√≠nh s√°ch b·∫£o m·∫≠t thanh to√°n</a></li>
        <li><a href="footer/csbaomattcn.html">Ch√≠nh s√°ch b·∫£o m·∫≠t th√¥ng tin c√° nh√¢n</a></li>
      </ul>
    </div>
    <div class="footer-column newsletter">
      <h4>ƒêƒÉng k√Ω nh·∫≠n th√¥ng tin</h4>
      <form class="newsletter-form">
        <input type="email" placeholder="Email address" required>
        <button type="submit">ƒêƒÉng k√Ω</button>
      </form>
      <h4>Theo d√µi ch√∫ng t√¥i</h4>
      <div class="social-icons">
        <a class="link-body-emphasis" href="https://www.facebook.com/profile.php?id=61569610366411" target="_blank">
          <i class="bi bi-facebook fs-4"></i>
        </a>
        <a href="https://www.instagram.com/home.cake_04/" target="_blank">
          <i class="bi bi-instagram fs-4"></i>
        </a>
      </div>
    </div>
  </div>
</footer>
</body>
</html>
    </div>
  </footer>
</body>
</html>

